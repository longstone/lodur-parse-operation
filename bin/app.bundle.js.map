{"version":3,"sources":["webpack/bootstrap ce016c92911c1d56f004","external \"moment\"","external \"lodash\"","C:/Users/longstone/IdeaProjects/lodur-parse-operation/src\\module\\util\\lodur-util.js","external \"mongoose\"","C:/Users/longstone/IdeaProjects/lodur-parse-operation/src\\schemas\\schemaU.js","C:/Users/longstone/IdeaProjects/lodur-parse-operation/src\\schemas\\logEntry.js","external \"path\"","external \"request\"","external \"string\"","C:/Users/longstone/IdeaProjects/lodur-parse-operation/src\\module\\pageloader.js","C:/Users/longstone/IdeaProjects/lodur-parse-operation/src\\module\\persistence\\persistence-service.js","C:/Users/longstone/IdeaProjects/lodur-parse-operation/src\\module\\telegram\\telegram-bot-service.js","C:/Users/longstone/IdeaProjects/lodur-parse-operation/src\\module\\util\\checkEnv.js","C:/Users/longstone/IdeaProjects/lodur-parse-operation/src\\routes\\route-index.js","C:/Users/longstone/IdeaProjects/lodur-parse-operation/src\\routes\\route-stats.js","C:/Users/longstone/IdeaProjects/lodur-parse-operation/src\\routes\\route-update-last-year.js","C:/Users/longstone/IdeaProjects/lodur-parse-operation/src\\routes\\route-update.js","C:/Users/longstone/IdeaProjects/lodur-parse-operation/src\\schemas\\chats.js","C:/Users/longstone/IdeaProjects/lodur-parse-operation/src\\schemas\\lodurEntry.js","C:/Users/longstone/IdeaProjects/lodur-parse-operation/src\\schemas\\mongo-connect.js","C:\\Users\\longstone\\IdeaProjects\\lodur-parse-operation\\node_modules\\source-map-support\\register.js","external \"body-parser\"","external \"cookie-parser\"","external \"express\"","external \"express-winston\"","external \"node-telegram-bot\"","external \"serve-favicon\"","external \"source-map-support\"","external \"winston\"","C:/Users/longstone/IdeaProjects/lodur-parse-operation/src\\app.js","C:/Users/longstone/IdeaProjects/lodur-parse-operation/src\\module\\entry.js","C:/Users/longstone/IdeaProjects/lodur-parse-operation/src\\module\\parser-14.js","C:/Users/longstone/IdeaProjects/lodur-parse-operation/src\\module\\parser-14util\\dateparser.js","C:/Users/longstone/IdeaProjects/lodur-parse-operation/src\\module\\parser-14util\\parseDescription.js","C:/Users/longstone/IdeaProjects/lodur-parse-operation/src\\module\\parser-14util\\parseGroups.js","C:/Users/longstone/IdeaProjects/lodur-parse-operation/src\\module\\parser-14util\\parseNumber.js","C:/Users/longstone/IdeaProjects/lodur-parse-operation/src\\module\\parser-14util\\parseTimeFromLine.js","C:\\Users\\longstone\\IdeaProjects\\lodur-parse-operation\\node_modules\\source-map-support\\source-map-support.js","external \"buffer-from\"","external \"cheerio\"","external \"fs\"","external \"module\"","external \"source-map\""],"names":["getLastEntry","getLastEntryF","list","cache","length","slice","pop","isOrderingForwards","orderingForwardsF","arr","number","sortArrayByNumber","sortArrayByNumberF","sort","a","b","getSendArray","getSendArrayF","json","_lastEntryCache","sendArr","entries","reverse","every","item","push","containsDuplicatedID","array","set","Set","map","add","size","getServerPort","process","env","NODE_PORT","PORT","getServerIp","NODE_IP","module","exports","SchemaU","schema","schemaName","on","error","console","log","_","get","indexes","index","logSchema","mongoose","Schema","timestamp","Date","text","String","description","SchemaUtil","LogEntry","models","model","request","require","cheerio","parser14","pageLoaderF","url_unsused","Promise","resolve","reject","parsedEntries","url","$","uri","method","encoding","err","resp","body","contentsOfPage","load","ex","create","JSON","stringify","message","stack","logger","each","position","element","entry","shift","forEach","PersistenceService","schemas","dependencies","LodurEntry","Chats","query","entriesThisYear","$gte","startOf","toDate","entriesLastYear","subtract","find","limit","exec","dto","save","chatId","docs","chats","chat","TelegramBotService","botInstance","req","persistenceService","bot","_initBot","that","findChatsById","id","then","createChat","firstName","first_name","lastName","last_name","type","username","_send","catch","doc","remove","sendMessage","findAllChats","_chatOrChats","LodurUtil","start","msg","conf","chat_id","count","term","CheckEnv","envVar","names","filter","name","undefined","RouteIndex","import","express","pageloader","res","setHeader","Buffer","getEntriesForActualYear","my_statistic","value","thisYear","label","RouteUpdate","telegramBot","telegramBotService","silent","all","getLastEntryForLastYear","result","lastEntries","lodurUtil","lastEntry","_doc","group","createNewLodurEntry","toString","locale","format","notifyAll","constex","newEntries","getLastEntryForYear","chatSchema","Chat","entrySchema","Number","MongoConnection","mongoUri","connectionStringWithoutCredentials","_stripCredentialsConnectionString","connect","useNewUrlParser","indexOfAt","indexOf","substFrom","substring","install","toUTCString","path","favicon","expressWinston","cookieParser","bodyParser","app","use","urlencoded","extended","static","join","__dirname","config","telegramToken","telegram_hash","Bot","token","router","Router","getRoute","RouteUpdateLastYear","RouteStats","next","originalUrl","Error","status","checkEnv","setVariableNames","missingEnv","check","global","options","promiseLibrary","MONGOURI","level","warn","listen","Entry","EntryF","prototype","getTimestamp","getTimestampF","getGroup","getGroupF","getDescription","getDescriptionF","getNumber","getNumberF","nr","newLine","lines","dateValues","date","time","split","values","moment","args","S","POSITION_OF_FIRST_SLASH","parseDescriptionF","line","replaceAll","s","end","trim","parseTimeFromLineF","startIndex","endIndex","parseNumberFromLineF","left","toInt","timeStartIndex","timeEndIndex"],"mappings":"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AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,6BAA6B,YAAY,kBAAkB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,2BAA2B;AAC3B;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,0DAA0D,gCAAgC,EAAE;AAC5F,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,2DAA2D,GAAG,sBAAsB,GAAG;AACvF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,wBAAwB;AAC5D,sCAAsC,sBAAsB;AAC5D,wCAAwC,4BAA4B;AACpE,iDAAiD,wBAAwB;AACzE;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,sCAAsC,eAAe;AACrD;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,eAAe;AACf;AACA,gCAAgC,QAAQ;AACxC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,2FAA2F,oBAAoB;AAC/G;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,mBAAO,CAAC,EAAQ;AAC/B,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;;;;;AC1kBA,wC;;;;;;ACAA,oC;;;;;;ACAA,+B;;;;;;ACAA,mC;;;;;;ACAA,uC","file":"app.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 29);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap ce016c92911c1d56f004","module.exports = require(\"moment\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"moment\"\n// module id = 0\n// module chunks = 0","module.exports = require(\"lodash\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lodash\"\n// module id = 1\n// module chunks = 0","const getLastEntry = function getLastEntryF(list, cache) {\r\n    if (list.length > 0) {\r\n        return list.slice(-1).pop();\r\n    }\r\n    return cache;\r\n};\r\n\r\nconst isOrderingForwards = function orderingForwardsF(arr) {\r\n    return arr.length > 0 && arr[0].number < getLastEntry(arr).number;\r\n};\r\n\r\nconst sortArrayByNumber = function sortArrayByNumberF(arr) {\r\n    arr.sort(function (a, b) {\r\n        return a.number - b.number;\r\n    });\r\n    return arr;\r\n};\r\n\r\nconst getSendArray = function getSendArrayF(json, _lastEntryCache) {\r\n\r\n    const sendArr = [];\r\n\r\n    if (json && json.length > 0) {\r\n        const entries = json.slice();\r\n        sortArrayByNumber(entries);\r\n        entries.reverse().every(function (item) {\r\n\r\n            if (item.number > _lastEntryCache.number) {\r\n                sendArr.push(item);\r\n                return true;\r\n            } else {\r\n                //we want to break\r\n                return false;\r\n            }\r\n        });\r\n    }\r\n    return sendArr.reverse();\r\n};\r\n\r\nconst containsDuplicatedID = function(array) {\r\n    if (!array) {\r\n        return false;\r\n    }\r\n    const set = new Set();\r\n    array.map(item => set.add(item.number));\r\n    return !(array.length === set.size);\r\n};\r\nconst getServerPort = () => {\r\n    return process.env.NODE_PORT || process.env.PORT || 8080\r\n};\r\nconst getServerIp = () => {\r\n    return process.env.NODE_IP || 'localhost'\r\n};\r\nmodule.exports = {\r\n    getLastEntry,\r\n    getSendArray,\r\n    isOrderingForwards,\r\n    sortArrayByNumber,\r\n    containsDuplicatedID,\r\n    getServerIp,\r\n    getServerPort\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/module/util/lodur-util.js","module.exports = require(\"mongoose\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongoose\"\n// module id = 3\n// module chunks = 0","import _ from 'lodash';\r\n\r\n/**\r\n * Schema Utility\r\n *\r\n */\r\nclass SchemaU {\r\n    constructor(schema, schemaName) {\r\n        this.schema = schema;\r\n        schema.on('index', (error) => {\r\n            // \"_id index cannot be sparse\"\r\n            console.log(schemaName + ' index: ' + _.get(error, 'message', 'seems ok'));\r\n        });\r\n    }\r\n\r\n    indexes(indexes) {\r\n        this.schema.index(indexes);\r\n    }\r\n\r\n\r\n}\r\n\r\nmodule.exports = SchemaU;\n\n\n// WEBPACK FOOTER //\n// ./src/schemas/schemaU.js","import mongoose from 'mongoose';\r\nimport SchemaUtil from './schemaU';\r\n\r\nconst logSchema = new mongoose.Schema({\r\n    timestamp: Date,\r\n    text: String,\r\n    error: {},\r\n    description: String\r\n});\r\n\r\nnew SchemaUtil(logSchema, 'LogEntry').indexes({timestamp: 1, error: -1});\r\n\r\nlet LogEntry;\r\nif (mongoose.models.LogEntry) {\r\n    LogEntry = mongoose.model('LogEntry');\r\n} else {\r\n    LogEntry = mongoose.model('LogEntry', logSchema);\r\n}\r\n\r\n\r\nmodule.exports = LogEntry;\n\n\n// WEBPACK FOOTER //\n// ./src/schemas/logEntry.js","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 6\n// module chunks = 0","module.exports = require(\"request\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"request\"\n// module id = 7\n// module chunks = 0","module.exports = require(\"string\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"string\"\n// module id = 8\n// module chunks = 0","\"use strict\";\r\nconst request = require('request');\r\nconst cheerio = require('cheerio');\r\nconst parser14 = require(\"./parser-14\");\r\nconst LogEntry = require('./../schemas/logEntry');\r\n\r\nmodule.exports = function pageLoaderF(url_unsused) {\r\n    return new Promise((resolve, reject)=> {\r\n        let parsedEntries= [];\r\n        let url = url_unsused || 'https://www.lodur-zh.ch/duebendorf/index.php?modul=6';\r\n        let $;\r\n        request(url, {\r\n            uri: url,\r\n            method: 'GET',\r\n            encoding: 'binary'\r\n        }, function (err, resp, body) {\r\n            let contentsOfPage = [];\r\n            try {\r\n                $ = cheerio.load(body);\r\n                contentsOfPage = $('div .content table');\r\n            } catch (ex) {\r\n                console.log('pageloader $',ex);\r\n                LogEntry.create({\r\n                    timestamp: new Date(),\r\n                    text: 'pageloader - parser: uncaughtException',\r\n                    error: JSON.stringify(ex),\r\n                    description: ex.message + '\\nbody:' + body + '\\n' + ex.stack\r\n                }, function (err) {\r\n                    if (err === null) {\r\n                        return;\r\n                    }\r\n                    console.log('persist new Entry ', err);\r\n                });\r\n                logger.log('error: pageloader parse',ex);\r\n                reject({'err-parse-contents-page' :ex});\r\n                return;\r\n            }\r\n            let entries = [];\r\n            contentsOfPage.each(function (position, element) {\r\n                const entry = $(element);\r\n                entries.push(entry.text());\r\n            });\r\n            entries.shift(); // remove Einsatzberichte des Jahres...\r\n            entries.forEach((element) =>{\r\n                parsedEntries.push(parser14(element));\r\n            });\r\n            resolve(parsedEntries);\r\n        });\r\n\r\n    });\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/module/pageloader.js","import moment from 'moment';\r\n\r\nclass PersistenceService {\r\n\r\n    constructor(schemas, dependencies) {\r\n        this.LodurEntry = schemas.LodurEntry;\r\n        this.Chats = schemas.Chats;\r\n        this.LogEntry = schemas.LogEntry;\r\n        this.logger = dependencies.logger;\r\n        this.query = {\r\n            entriesThisYear: {timestamp: {$gte: moment().startOf('year').toDate()}},\r\n            entriesLastYear: {timestamp: {$gte: moment().startOf('year').subtract(1,'years').toDate()}}\r\n        };\r\n    }\r\n\r\n    getLastEntryForYear() {\r\n        return new Promise((resolve, reject) => {\r\n            this.LodurEntry.find(this.query.entriesThisYear).sort({number: -1}).limit(1).exec(function (err, entries) {\r\n                if (err === null) {\r\n                    resolve(entries)\r\n                } else {\r\n                    reject(err);\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    getLastEntryForLastYear() {\r\n        return new Promise((resolve, reject) => {\r\n            this.LodurEntry.find(this.query.entriesLastYear).sort({number: -1}).limit(1).exec(function (err, entries) {\r\n                if (err === null) {\r\n                    resolve(entries)\r\n                } else {\r\n                    reject(err);\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    getEntriesForActualYear() {\r\n        return this.LodurEntry.find(this.query.entriesThisYear).sort({number: -1}).exec();\r\n    }\r\n\r\n    getEntriesForLastYear() {\r\n        return this.LodurEntry.find(this.query.entriesLastYear).sort({number: -1}).exec();\r\n    }\r\n\r\n    createNewLodurEntry(dto) {\r\n        return new this.LodurEntry(dto).save();\r\n    }\r\n\r\n    findChatsById(chatId) {\r\n        return new Promise((resolve, reject) => {\r\n            this.Chats.find({chatId}, (err, docs) => {\r\n                if (err !== null) {\r\n                    reject({'err-find-chats-by-id': err});\r\n                } else {\r\n                    resolve(docs);\r\n                }\r\n            })\r\n        });\r\n    }\r\n\r\n    findAllChats() {\r\n        return new Promise((resolve, reject) => {\r\n            this.Chats.find({}, (err, chats) => {\r\n                if (err != null) {\r\n                    reject({'err-find-all-chats': err});\r\n                } else {\r\n                    resolve(chats);\r\n                }\r\n            })\r\n        });\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param chat {\r\n                chatId,\r\n                firstName,\r\n                lastName,\r\n                type,\r\n                username\r\n            }\r\n     * @returns {Promise}\r\n     */\r\n    createChat(chat) {\r\n        return new this.Chats(chat).save();\r\n    }\r\n\r\n    log(text, error) {\r\n        this.logger.log('debug', 'persistence-service logged: ' + text + ' -> ' + error);\r\n        this.LogEntry.create({\r\n            timestamp: new Date(),\r\n            text,\r\n            error\r\n        }, function (err) {\r\n            if (err !== null) {\r\n                this.logger.log('error', 'persist new received Error', err)\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nmodule.exports = PersistenceService;\n\n\n// WEBPACK FOOTER //\n// ./src/module/persistence/persistence-service.js","import _ from 'lodash';\r\nimport LodurUtil from './../util/lodur-util';\r\n\r\nclass TelegramBotService {\r\n    constructor(botInstance, dependencies) {\r\n        this.req = {};\r\n        this.req.request = dependencies.request;\r\n        this.persistenceService = dependencies.persistenceService;\r\n        this.logger = dependencies.logger;\r\n        this.bot = this._initBot(botInstance, this.logger);\r\n        this.logger.log('debug', 'telegram-bot-service: construction');\r\n    }\r\n\r\n    _initBot(botInstance, logger) {\r\n        logger.log('info', 'binding bot commands');\r\n        const that = this;\r\n        return botInstance.on('error', (message) => {\r\n            // prevent bot from crashing\r\n            this.logger.log('error', 'telegram-bot-service: Bot.onError -> ' + JSON.stringify(message));\r\n            this.persistenceService.log('telegramMngr - received error: ' + JSON.stringify(message),\r\n                'Bot.onError:' + message\r\n            );\r\n        }).on('start', message => {\r\n            this.persistenceService.log('telegram-bot-service: cmd start: ', JSON.stringify(message));\r\n            this.persistenceService.findChatsById(message.chat.id).then(docs => {\r\n                if (docs.length === 0) {\r\n                    this.persistenceService.createChat({\r\n                        chatId: message.chat.id,\r\n                        firstName: message.chat.first_name,\r\n                        lastName: message.chat.last_name,\r\n                        type: message.chat.type,\r\n                        username: message.chat.username\r\n                    }).then(success => {\r\n                        this.persistenceService.log('info', 'registered chat id ' + message.chat.id);\r\n                        this._send(message.chat.id, 'should be registered right now');\r\n                    }).catch(err => {\r\n                        this.persistenceService.log('error', 'telegram-bot-service: error occured ' + JSON.stringify(err));\r\n                        this._send(message.chat.id, 'should be registered right now');\r\n                    });\r\n                } else {\r\n                    this.persistenceService.log('error', 'already registered chat id ' + message.chat.id);\r\n                    this._send(message.chat.id, 'you\\'re registered already, doing nothing...');\r\n                }\r\n            }).catch(err => this.logger.log('error', 'telegram-bot-service: unknow error occured ' + JSON.stringify(err)));\r\n        }).on('stop', (message) => {\r\n            this.persistenceService.log('telegram-bot-service: cmd stop: ', JSON.stringify(message));\r\n            this.persistenceService.findChatsById(message.chat.id).then(docs => {\r\n                _.each(docs, doc => doc.remove((error) => {\r\n                    let sendMessage = 'removed you from notification list';\r\n                    if (error) {\r\n                        sendMessage = 'error while removing ' + error;\r\n                    }\r\n                    that._send(message.chat.id, sendMessage);\r\n                }));\r\n            });\r\n        }).on('stats', message => {\r\n            this.persistenceService.log('telegram-bot-service: cmd stats: ' + JSON.stringify(message));\r\n            this.persistenceService.findAllChats().then(chats => {\r\n                const sendMessage = 'currently, im notifying ' + TelegramBotService._chatOrChats(chats.length);\r\n                that._send(message.chat.id, sendMessage);\r\n            }).catch(err => {\r\n                console.log('stats', err);\r\n                that.logger('warn', JSON.stringify(err))\r\n            });\r\n        }).on('update', message => {\r\n            this.persistenceService.log('telegram-bot-service: cmd update: ', JSON.stringify(message));\r\n                this.req.request('http://'+LodurUtil.getServerIp()+':'+LodurUtil.getServerPort()+'/update', () => {\r\n                logger.log('info', 'update from bot triggered');\r\n                that._send(message.chat.id, 'update triggered');\r\n             });\r\n\r\n        }).start();\r\n    }\r\n\r\n    static _chatOrChats(count) {\r\n        const term = count + ' chat';\r\n        if (count > 1) {\r\n            return term + 's';\r\n        }\r\n        return term;\r\n    };\r\n\r\n    notifyAll(message) {\r\n        return new Promise((resolve, reject) => {\r\n            this.persistenceService.findAllChats().then(chats => {\r\n                chats.map(chat => {\r\n                    this._send(chat.chatId, message);\r\n                    return true;\r\n                }).every(() => {\r\n                    resolve(chats);\r\n                    return false;\r\n                });\r\n            }).catch(err => {\r\n                this.persistenceService.log('telegram-bot-service.notifyAll: error', err);\r\n                reject({'error-find-all-chats': err})\r\n            });\r\n        });\r\n    }\r\n\r\n    _send(id, msg) {\r\n        const conf = {\r\n            chat_id: id,\r\n            text: msg\r\n        };\r\n        this.logger.log('debug', 'send ' + JSON.stringify(conf));\r\n        this.bot.sendMessage(conf, (err, body) => {\r\n            if (err) {\r\n                this.persistenceService.log(\r\n                    'telegramMngr - send: ' + JSON.stringify(body) + 'conf: ' + JSON.stringify(conf),\r\n                    'id: ' + id + ' text:' + this._.isObject(err) ? JSON.stringify(err) : err + '\\n' + body\r\n                );\r\n            } else {\r\n                this.persistenceService.log('sucessful sent :' + JSON.stringify(body), '');\r\n            }\r\n        });\r\n    }\r\n\r\n}\r\nmodule.exports = TelegramBotService;\n\n\n// WEBPACK FOOTER //\n// ./src/module/telegram/telegram-bot-service.js","/**\r\n * Created by lag on 06.02.2017.\r\n */\r\nclass CheckEnv {\r\n    /**\r\n     *\r\n     * @param envVar process.env\r\n     */\r\n    constructor(envVar) {\r\n        this.process = envVar;\r\n    }\r\n\r\n    /**\r\n     * pass an array containing the variable names\r\n     * @param array\r\n     */\r\n    setVariableNames(array) {\r\n        this.names = array.slice();\r\n    }\r\n\r\n    check() {\r\n        return this.names.filter(name => this.process[name]=== undefined);\r\n    }\r\n}\r\nmodule.exports = CheckEnv;\n\n\n// WEBPACK FOOTER //\n// ./src/module/util/checkEnv.js","class RouteIndex {\r\n\r\n    constructor(dependencies) {\r\n        this.import = {\r\n            express: dependencies.express,\r\n            pageloader: dependencies.pageloader\r\n        };\r\n    }\r\n\r\n    getRoute() {\r\n        return (req, res) => {\r\n            this.import.pageloader().then(json => {\r\n                    res.setHeader('charset', 'utf8');\r\n                    res.setHeader('Content-Length', new Buffer(json).length);\r\n                    res.json(json);\r\n                },\r\n                err => res.json({error: err}));\r\n\r\n        }\r\n    }\r\n}\r\n\r\nmodule.exports = RouteIndex;\n\n\n// WEBPACK FOOTER //\n// ./src/routes/route-index.js","class RouteIndex {\r\n\r\n    constructor(dependencies) {\r\n        this.import = {\r\n            express: dependencies.express,\r\n            persistenceService: dependencies.persistenceService,\r\n            logger: dependencies.logger\r\n        };\r\n    }\r\n\r\n    // maybe there is something for https://www.dasheroo.com/\r\n    getRoute() {\r\n        return (req, res) => {\r\n            this.import.persistenceService.getEntriesForActualYear().then(\r\n                thisYear => res.json({\r\n                    my_statistic: {\r\n                        type: 'integer',\r\n                        value: thisYear.length,\r\n                        label: 'Einstze im aktuellen Jahr'\r\n                    }\r\n                })\r\n            );\r\n        }\r\n    }\r\n}\r\n\r\n\r\nmodule.exports = RouteIndex;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/routes/route-stats.js","import _ from 'lodash';\r\nimport moment from 'moment'\r\nimport lodurUtil from '../module/util/lodur-util';\r\n\r\n\r\nclass RouteUpdate {\r\n    constructor(dependencies) {\r\n        this.persistenceService = dependencies.persistenceService;\r\n        this.pageloader = dependencies.pageloader;\r\n        this.telegramBot = dependencies.telegramBotService;\r\n        this.logger = dependencies.logger;\r\n    }\r\n\r\n\r\n    getRoute() {\r\n        return (req, res) => {\r\n            let silent = _.get(req, 'query.silent', false);\r\n            this.logger.log('debug', 'route-update: update requested');\r\n             Promise.all([\r\n                this.persistenceService.getLastEntryForLastYear(),\r\n                this.pageloader(\"https://www.lodur-zh.ch/duebendorf/index.php?modul=6&year=\" + moment().startOf('year').subtract(1,'years').get('year'))\r\n            ])\r\n                .then(result => {\r\n                    try{\r\n                    const docs = result[0];\r\n                    const entries = result[1];\r\n                    let lastEntries = [];\r\n                    if (lodurUtil.containsDuplicatedID(entries)) {\r\n                        this.logger.log('warn', 'duplicated ID in entries: ', JSON.stringify(lastEntries));\r\n                    } else {\r\n                        let lastEntry = {number: -1};\r\n                        if (docs.length === 1) {\r\n                            lastEntry = docs[0]._doc;\r\n                        }\r\n                        lastEntries = lodurUtil.getSendArray(entries, lastEntry);\r\n                        this.logger.log('info', 'route-update: elements to send ', lastEntries.length);\r\n                        if (lastEntries.length > 0) {\r\n                            lodurUtil.sortArrayByNumber(lastEntries).forEach((item) => {\r\n                                try {\r\n                                this.logger.log('info', 'route-update: persisting item nr', item.number);\r\n                                const entry = {\r\n                                    number: item.number,\r\n                                    group: item.group,\r\n                                    timestamp: item.timestamp,\r\n                                    description: item.description\r\n                                };\r\n                                this.persistenceService.createNewLodurEntry(entry).then(() => {\r\n                                    this.logger.log('info', 'route-update: persisted item nr', item.number);\r\n\r\n                                        const message = \"Wer:  \" + item.group.toString() + \"\\n\"\r\n                                            + \"Was:  \" + item.description + \"\\n\"\r\n                                            + \"Wann: \" + moment(item.timestamp).locale('de').format('HH:mm DD.MM.YY') + \"\\n\"\r\n                                            + \"Nummer: \" + item.number;\r\n                                        this.telegramBot.notifyAll(message).then( (chats) => this.logger.log('info','total '+chats.length+' notified'));\r\n\r\n                                    }).catch(error => this.logger.log('error', 'persist new Entry Error' + JSON.stringify(error)));\r\n                                }catch (constex){\r\n                                    this.logger.log('info','woohwohohwohowow'+constex);\r\n                                }\r\n                            });\r\n                        } else if (silent) {\r\n                            this.logger.log('debug', 'no update, latest was: ' + JSON.stringify(lastEntry));\r\n                        }\r\n                    }\r\n                    res.json({newEntries: lastEntries});\r\n                    } catch (ex){\r\n                        this.logger.log('error', 'route-update: exception occured: ' + JSON.stringify(ex));\r\n                        res.json({'error-catch':ex});\r\n                    }\r\n                })\r\n                .catch((err) => {\r\n                    this.persistenceService.log('error', 'route-update Promise.all err: ' + JSON.stringify(err));\r\n                    res.json({error: err });\r\n                })\r\n\r\n        }\r\n    }\r\n}\r\nmodule.exports = RouteUpdate;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/routes/route-update-last-year.js","import _ from 'lodash';\r\nimport moment from 'moment'\r\nimport lodurUtil from '../module/util/lodur-util';\r\n\r\nclass RouteUpdate {\r\n    constructor(dependencies) {\r\n        this.persistenceService = dependencies.persistenceService;\r\n        this.pageloader = dependencies.pageloader;\r\n        this.telegramBot = dependencies.telegramBotService;\r\n        this.logger = dependencies.logger;\r\n    }\r\n\r\n\r\n    getRoute() {\r\n        return (req, res) => {\r\n            let silent = _.get(req, 'query.silent', false);\r\n            this.logger.log('debug', 'route-update: update requested');\r\n            Promise.all([\r\n                this.persistenceService.getLastEntryForYear(),\r\n                this.pageloader()\r\n            ])\r\n                .then(result => {\r\n                    try{\r\n                        const docs = result[0];\r\n                        const entries = result[1];\r\n                        let lastEntries = [];\r\n                        if (lodurUtil.containsDuplicatedID(entries)) {\r\n                            this.logger.log('warn', 'duplicated ID in entries: ', JSON.stringify(lastEntries));\r\n                        } else {\r\n                            let lastEntry = {number: -1};\r\n                            if (docs.length === 1) {\r\n                                lastEntry = docs[0]._doc;\r\n                            }\r\n                            lastEntries = lodurUtil.getSendArray(entries, lastEntry);\r\n                            this.logger.log('info', 'route-update: elements to send ', lastEntries.length);\r\n                            if (lastEntries.length > 0) {\r\n                                lodurUtil.sortArrayByNumber(lastEntries).forEach((item) => {\r\n                                    try {\r\n                                        this.logger.log('info', 'route-update: persisting item nr', item.number);\r\n                                        const entry = {\r\n                                            number: item.number,\r\n                                            group: item.group,\r\n                                            timestamp: item.timestamp,\r\n                                            description: item.description\r\n                                        };\r\n                                        this.persistenceService.createNewLodurEntry(entry).then(() => {\r\n                                            this.logger.log('info', 'route-update: persisted item nr', item.number);\r\n\r\n                                            const message = \"Wer:  \" + item.group.toString() + \"\\n\"\r\n                                                + \"Was:  \" + item.description + \"\\n\"\r\n                                                + \"Wann: \" + moment(item.timestamp).locale('de').format('HH:mm DD.MM.YY') + \"\\n\"\r\n                                                + \"Nummer: \" + item.number;\r\n                                            this.telegramBot.notifyAll(message).then((chats) => this.logger.log('info', 'total ' + chats.length + ' notified'));\r\n\r\n                                        }).catch(error => this.logger.log('error', 'persist new Entry Error' + JSON.stringify(error)));\r\n                                    } catch (constex) {\r\n                                        this.logger.log('info', 'woohwohohwohowow' + constex);\r\n                                    }\r\n                                });\r\n                            } else if (silent) {\r\n                                this.logger.log('debug', 'no update, latest was: ' + JSON.stringify(lastEntry));\r\n                            }\r\n                        }\r\n                        res.json({newEntries: lastEntries});\r\n                    } catch (ex){\r\n                        this.logger.log('error', 'route-update: exception occured: ' + JSON.stringify(ex));\r\n                        res.json({'error-catch':ex});\r\n                    }\r\n                })\r\n                .catch((err) => {\r\n                    this.persistenceService.log('error', 'route-update Promise.all err: ' + JSON.stringify(err));\r\n                    res.json({error: err });\r\n                })\r\n\r\n        }\r\n    }\r\n}\r\nmodule.exports = RouteUpdate;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/routes/route-update.js","import mongoose from 'mongoose';\r\nimport SchemaUtil from './schemaU';\r\n\r\nconst chatSchema = new mongoose.Schema({\r\n    chatId: String,\r\n    firstName: String,\r\n    lastName: String,\r\n    type: String,\r\n    username: String\r\n});\r\n\r\nnew SchemaUtil(chatSchema, 'Chat').indexes({chatId: 1});\r\n\r\nlet Chat;\r\nif (mongoose.models.Chat) {\r\n    Chat = mongoose.model('Chat');\r\n} else {\r\n    Chat = mongoose.model('Chat', chatSchema);\r\n}\r\nmodule.exports = Chat;\n\n\n// WEBPACK FOOTER //\n// ./src/schemas/chats.js","import mongoose from 'mongoose';\r\nimport SchemaUtil from './schemaU';\r\n\r\nconst entrySchema = new mongoose.Schema({\r\n    group: [String],\r\n    timestamp: Date,\r\n    description: String,\r\n    number : Number\r\n});\r\n\r\nnew SchemaUtil(entrySchema, 'LodurEntry').indexes({number: 1, timestamp: -1});\r\nlet LodurEntry;\r\nif (mongoose.models.LodurEntry) {\r\n    LodurEntry = mongoose.model('LodurEntry');\r\n} else {\r\n    LodurEntry = mongoose.model('LodurEntry', entrySchema);\r\n}\r\n\r\nmodule.exports = LodurEntry;\n\n\n// WEBPACK FOOTER //\n// ./src/schemas/lodurEntry.js","class MongoConnection {\r\n    constructor(mongoose, mongoUri, logger) {\r\n        const connectionStringWithoutCredentials = MongoConnection._stripCredentialsConnectionString(mongoUri);\r\n        mongoose.connect(mongoUri, {\r\n            useNewUrlParser: true\r\n        }).then(\r\n            () => logger.log('info', 'Succeeded connected to: ' + connectionStringWithoutCredentials),\r\n            err => logger.log('error', 'ERROR connecting to: ' + connectionStringWithoutCredentials + '. ' + err)\r\n        ).catch(err => console.log('mongoose-connect: unhandled error', err));\r\n    }\r\n\r\n    static _stripCredentialsConnectionString(uri) {\r\n        const indexOfAt = uri.indexOf('@');\r\n        let substFrom = 0;\r\n        if (indexOfAt > 0) {\r\n            substFrom = indexOfAt;\r\n        }\r\n        return uri.substring(substFrom);\r\n    }\r\n\r\n\r\n}\r\n\r\nmodule.exports = MongoConnection;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/schemas/mongo-connect.js","require('./').install();\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/source-map-support/register.js\n// module id = 20\n// module chunks = 0","module.exports = require(\"body-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"body-parser\"\n// module id = 21\n// module chunks = 0","module.exports = require(\"cookie-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"cookie-parser\"\n// module id = 22\n// module chunks = 0","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 23\n// module chunks = 0","module.exports = require(\"express-winston\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express-winston\"\n// module id = 24\n// module chunks = 0","module.exports = require(\"node-telegram-bot\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"node-telegram-bot\"\n// module id = 25\n// module chunks = 0","module.exports = require(\"serve-favicon\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"serve-favicon\"\n// module id = 26\n// module chunks = 0","module.exports = require(\"source-map-support\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"source-map-support\"\n// module id = 27\n// module chunks = 0","module.exports = require(\"winston\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"winston\"\n// module id = 28\n// module chunks = 0","\"use strict\";\r\nrequire('source-map-support').install();\r\nimport 'source-map-support/register';\r\nimport PersistenceService from './module/persistence/persistence-service';\r\nimport TelegramBotService from './module/telegram/telegram-bot-service';\r\nimport Bot from 'node-telegram-bot'\r\nimport LodurEntry from './schemas/lodurEntry';\r\nimport Chats from './schemas/chats';\r\nimport LogEntry from './schemas/logEntry'\r\nimport _ from 'lodash';\r\nimport request from 'request';\r\nimport express from 'express';\r\nimport logger from 'winston';\r\nimport RouteIndex from './routes/route-index';\r\nimport RouteUpdate from './routes/route-update';\r\nimport RouteUpdateLastYear from './routes/route-update-last-year';\r\nimport RouteStats from './routes/route-stats';\r\nimport LodurUtil from './module/util/lodur-util';\r\nimport MongoConnection from './schemas/mongo-connect';\r\n//# sourceMappingURL=./app.bundle.js.map\r\n\r\nconst CheckEnv = require('./module/util/checkEnv');\r\nprocess.on('uncaughtException', function (err) {\r\n    LogEntry.create({\r\n        timestamp: new Date(),\r\n        text: 'app.js - uncaughtException',\r\n        error: JSON.stringify(err),\r\n        description: _.get(err, 'message', 'nomessage') + '\\nstack:\\n' + _.get(err, 'stack', 'nostack')\r\n    }, function (err) {\r\n        if (err === null) {\r\n            return;\r\n        }\r\n        console.log('persist new Entry ', err);\r\n    });\r\n    console.error((new Date).toUTCString() + ' uncaughtException:');\r\n    console.error(err);\r\n    console.error(err.message);\r\n    console.error(err.stack);\r\n});\r\n\r\nconst path = require('path');\r\nconst favicon = require('serve-favicon');\r\nconst expressWinston = require('express-winston');\r\nconst cookieParser = require('cookie-parser');\r\nconst bodyParser = require('body-parser');\r\nconst mongoose = require('mongoose');\r\nconst pageloader = require('./module/pageloader');\r\nconst app = express();\r\n\r\n\r\n// uncomment after placing your favicon in /public\r\n//app.use(favicon(__dirname + '/public/favicon.ico'));\r\n// app.use(expressWinston.logger({\r\n//     transports: [\r\n//         new logger.transports.Console({\r\n//             json: true,\r\n//             colorize: true\r\n//         })\r\n//     ]\r\n// }));\r\napp.use(bodyParser.json());\r\napp.use(bodyParser.urlencoded({extended: false}));\r\napp.use(cookieParser());\r\napp.use(express.static(path.join(__dirname, 'public')));\r\n\r\nconst config = {telegramToken: process.env.telegram_hash};\r\nconst dependencies = {\r\n    express,\r\n    pageloader,\r\n    persistenceService: new PersistenceService({\r\n        Chats,\r\n        LogEntry,\r\n        LodurEntry\r\n    }, {logger}),\r\n    logger,\r\n    request,\r\n    telegramBotService: null\r\n};\r\nconst bot = new Bot({token: config.telegramToken});\r\ndependencies.telegramBotService = new TelegramBotService(bot, dependencies);\r\nconst router = express.Router();\r\nrouter.get('/', new RouteIndex(dependencies).getRoute());\r\nrouter.get('/update', new RouteUpdate(dependencies).getRoute());\r\nrouter.get('/update-last-year', new RouteUpdateLastYear(dependencies).getRoute());\r\nrouter.get('/stats-dasheroo', new RouteStats(dependencies).getRoute());\r\napp.use('/', router);\r\n// catch 404 and forward to error handler\r\napp.use(function (req, res, next) {\r\n    logger.log('warn', 'errorhandler ', req.originalUrl);\r\n    const err = new Error('Not Found');\r\n    err.status = 404;\r\n    next(err);\r\n});\r\nconst checkEnv = new CheckEnv(process.env);\r\ncheckEnv.setVariableNames(['MONGOURI', 'telegram_hash']);\r\nconst missingEnv = checkEnv.check();\r\nif (missingEnv.length > 0) {\r\n    logger.log('warn', 'missing process.env variables: ', missingEnv);\r\n}\r\nmongoose.Promise = global.Promise;\r\n\r\nconst options = {promiseLibrary: global.Promise};\r\n\r\nconst mongoUri = process.env.MONGOURI || \"mongodb://localhost:27017/lodur\";\r\nnew MongoConnection(mongoose, mongoUri, logger);\r\n\r\n// error handlers\r\n\r\n// development error handler\r\n// will print stacktrace\r\nif (app.get('env') === 'development') {\r\n    logger.level = 'silly';\r\n    logger.warn('env:development');\r\n    mongoose.set('debug', true);\r\n    app.use(function (err, req, res, next) {\r\n        res.status(err.status || 500);\r\n        res.json({\r\n            message: err.message,\r\n            error: err\r\n        });\r\n    });\r\n} else {\r\n\r\n// production error handler\r\n// no stacktraces leaked to user\r\n    app.use(function (err, req, res, next) {\r\n        logger.log('error', err);\r\n        res.status(err.status || 500);\r\n        res.json({\r\n            message: err.message,\r\n            error: {}\r\n        });\r\n    });\r\n}\r\n\r\napp.listen(LodurUtil.getServerPort(), LodurUtil.getServerIp(), function () {\r\n    logger.log('info', \"Listening on server_port: \" + LodurUtil.getServerPort());\r\n    logger.log('info', \"Listening on server_ip_address: \" + LodurUtil.getServerIp());\r\n});\r\n\r\nmodule.exports = app;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app.js","/**\r\n * Created by longstone on 15/11/14.\r\n */\r\n\"use strict\";\r\nvar Entry = function EntryF(that) {\r\n    if (!that) {\r\n        that = {};\r\n    }\r\n    this.timestamp = that.timestamp || '';\r\n    this.group = that.group || '';\r\n    this.description = that.description || '';\r\n    this.number = that.number || -1;\r\n};\r\n\r\nEntry.prototype.getTimestamp = function getTimestampF() {\r\n    return this.timestamp;\r\n};\r\nEntry.prototype.getGroup = function getGroupF() {\r\n    return this.group;\r\n};\r\nEntry.prototype.getDescription = function getDescriptionF() {\r\n    return this.description;\r\n};\r\nEntry.prototype.getNumber = function getNumberF() {\r\n    return this.nr;\r\n};\r\n\r\nmodule.exports = Entry;\n\n\n// WEBPACK FOOTER //\n// ./src/module/entry.js","/**\r\n * Created by longstone on 15/11/14.\r\n */\r\nimport Entry from './entry';\r\nimport dateParser from'./parser-14util/dateparser';\r\nimport parseTimeFromLine from './parser-14util/parseTimeFromLine';\r\nimport parseGroups from './parser-14util/parseGroups';\r\nimport parseDescription from './parser-14util/parseDescription';\r\nimport parseNumber from './parser-14util/parseNumber';\r\n\r\nconst newLine = '\\n';\r\n\r\nconst getTimestamp = (lines) => {\r\n    const dateValues = {};\r\n    dateValues.date = lines[2];\r\n    dateValues.time = parseTimeFromLine(lines[3]);\r\n    return dateParser(dateValues);\r\n};\r\nmodule.exports = (text) => {\r\n    const lines = text.split(newLine);\r\n    const values = {\r\n        group: parseGroups(lines[3]),\r\n        timestamp: getTimestamp(lines, values),\r\n        description: parseDescription(lines[3]),\r\n        number: parseNumber(lines[3])\r\n\r\n    };\r\n    return new Entry(values);\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/module/parser-14.js","\"use strict\";\r\nvar moment = require('moment');\r\n/**\r\n * Created by longstone on 16/12/14.\r\n */\r\n/**\r\n * due to missing java a little bit, this is an array with date and time, named after the public static void main args..\r\n * @param args\r\n */\r\nmodule.exports = function (args) {\r\n    var date = args.date;\r\n    var time = args.time;\r\n    return moment(date + \" \" + time, \"DD.MM.YYYY HH.mm\");\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/module/parser-14util/dateparser.js","\"use strict\";\r\nvar S = require('string');\r\n/**\r\n * Created by longstone on 31/12/14.\r\n */\r\nvar POSITION_OF_FIRST_SLASH = 17;\r\nmodule.exports = function parseDescriptionF(line) {\r\n    // todo replace 'string'\r\n    line = S(line).replaceAll('\\t', '').s;\r\n    var start = line.indexOf(' / ', POSITION_OF_FIRST_SLASH) + 3;\r\n    var end = line.length;\r\n    return line.substring(start, end).trim();\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/module/parser-14util/parseDescription.js","\"use strict\";\r\nvar moment = require('moment');\r\n/**\r\n * Created by longstone on 16/12/14.\r\n */\r\n\r\nmodule.exports = function parseTimeFromLineF(line) {\r\n    var startIndex = line.indexOf('/') + 2;\r\n    var endIndex = line.substring(startIndex, line.length).indexOf('/') - 1 + startIndex;\r\n    var result = line.substring(startIndex, endIndex);\r\n    return result.split(\"+\");\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/module/parser-14util/parseGroups.js","/**\r\n * Created by longstone on 25/03/15.\r\n */\r\n\"use strict\";\r\nvar S = require(\"string\");\r\n/**\r\n * Created by longstone on 16/12/14.\r\n */\r\n\r\nmodule.exports = function parseNumberFromLineF(line) {\r\n    var endIndex = line.indexOf(' /');\r\n    return S(line).left(endIndex).toInt();\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/module/parser-14util/parseNumber.js","\"use strict\";\r\nvar moment = require('moment');\r\n/**\r\n * Created by longstone on 16/12/14.\r\n */\r\n\r\nmodule.exports = function parseTimeFromLineF(line) {\r\n    var timeStartIndex = line.indexOf('- ') + 2;\r\n    var timeEndIndex = line.indexOf(' Uhr');\r\n    return line.substring(timeStartIndex, timeEndIndex)\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/module/parser-14util/parseTimeFromLine.js","var SourceMapConsumer = require('source-map').SourceMapConsumer;\nvar path = require('path');\n\nvar fs;\ntry {\n  fs = require('fs');\n  if (!fs.existsSync || !fs.readFileSync) {\n    // fs doesn't have all methods we need\n    fs = null;\n  }\n} catch (err) {\n  /* nop */\n}\n\nvar bufferFrom = require('buffer-from');\n\n// Only install once if called multiple times\nvar errorFormatterInstalled = false;\nvar uncaughtShimInstalled = false;\n\n// If true, the caches are reset before a stack trace formatting operation\nvar emptyCacheBetweenOperations = false;\n\n// Supports {browser, node, auto}\nvar environment = \"auto\";\n\n// Maps a file path to a string containing the file contents\nvar fileContentsCache = {};\n\n// Maps a file path to a source map for that file\nvar sourceMapCache = {};\n\n// Regex for detecting source maps\nvar reSourceMap = /^data:application\\/json[^,]+base64,/;\n\n// Priority list of retrieve handlers\nvar retrieveFileHandlers = [];\nvar retrieveMapHandlers = [];\n\nfunction isInBrowser() {\n  if (environment === \"browser\")\n    return true;\n  if (environment === \"node\")\n    return false;\n  return ((typeof window !== 'undefined') && (typeof XMLHttpRequest === 'function') && !(window.require && window.module && window.process && window.process.type === \"renderer\"));\n}\n\nfunction hasGlobalProcessEventEmitter() {\n  return ((typeof process === 'object') && (process !== null) && (typeof process.on === 'function'));\n}\n\nfunction handlerExec(list) {\n  return function(arg) {\n    for (var i = 0; i < list.length; i++) {\n      var ret = list[i](arg);\n      if (ret) {\n        return ret;\n      }\n    }\n    return null;\n  };\n}\n\nvar retrieveFile = handlerExec(retrieveFileHandlers);\n\nretrieveFileHandlers.push(function(path) {\n  // Trim the path to make sure there is no extra whitespace.\n  path = path.trim();\n  if (/^file:/.test(path)) {\n    // existsSync/readFileSync can't handle file protocol, but once stripped, it works\n    path = path.replace(/file:\\/\\/\\/(\\w:)?/, function(protocol, drive) {\n      return drive ?\n        '' : // file:///C:/dir/file -> C:/dir/file\n        '/'; // file:///root-dir/file -> /root-dir/file\n    });\n  }\n  if (path in fileContentsCache) {\n    return fileContentsCache[path];\n  }\n\n  var contents = '';\n  try {\n    if (!fs) {\n      // Use SJAX if we are in the browser\n      var xhr = new XMLHttpRequest();\n      xhr.open('GET', path, /** async */ false);\n      xhr.send(null);\n      if (xhr.readyState === 4 && xhr.status === 200) {\n        contents = xhr.responseText;\n      }\n    } else if (fs.existsSync(path)) {\n      // Otherwise, use the filesystem\n      contents = fs.readFileSync(path, 'utf8');\n    }\n  } catch (er) {\n    /* ignore any errors */\n  }\n\n  return fileContentsCache[path] = contents;\n});\n\n// Support URLs relative to a directory, but be careful about a protocol prefix\n// in case we are in the browser (i.e. directories may start with \"http://\" or \"file:///\")\nfunction supportRelativeURL(file, url) {\n  if (!file) return url;\n  var dir = path.dirname(file);\n  var match = /^\\w+:\\/\\/[^\\/]*/.exec(dir);\n  var protocol = match ? match[0] : '';\n  var startPath = dir.slice(protocol.length);\n  if (protocol && /^\\/\\w\\:/.test(startPath)) {\n    // handle file:///C:/ paths\n    protocol += '/';\n    return protocol + path.resolve(dir.slice(protocol.length), url).replace(/\\\\/g, '/');\n  }\n  return protocol + path.resolve(dir.slice(protocol.length), url);\n}\n\nfunction retrieveSourceMapURL(source) {\n  var fileData;\n\n  if (isInBrowser()) {\n     try {\n       var xhr = new XMLHttpRequest();\n       xhr.open('GET', source, false);\n       xhr.send(null);\n       fileData = xhr.readyState === 4 ? xhr.responseText : null;\n\n       // Support providing a sourceMappingURL via the SourceMap header\n       var sourceMapHeader = xhr.getResponseHeader(\"SourceMap\") ||\n                             xhr.getResponseHeader(\"X-SourceMap\");\n       if (sourceMapHeader) {\n         return sourceMapHeader;\n       }\n     } catch (e) {\n     }\n  }\n\n  // Get the URL of the source map\n  fileData = retrieveFile(source);\n  var re = /(?:\\/\\/[@#][\\s]*sourceMappingURL=([^\\s'\"]+)[\\s]*$)|(?:\\/\\*[@#][\\s]*sourceMappingURL=([^\\s*'\"]+)[\\s]*(?:\\*\\/)[\\s]*$)/mg;\n  // Keep executing the search to find the *last* sourceMappingURL to avoid\n  // picking up sourceMappingURLs from comments, strings, etc.\n  var lastMatch, match;\n  while (match = re.exec(fileData)) lastMatch = match;\n  if (!lastMatch) return null;\n  return lastMatch[1];\n};\n\n// Can be overridden by the retrieveSourceMap option to install. Takes a\n// generated source filename; returns a {map, optional url} object, or null if\n// there is no source map.  The map field may be either a string or the parsed\n// JSON object (ie, it must be a valid argument to the SourceMapConsumer\n// constructor).\nvar retrieveSourceMap = handlerExec(retrieveMapHandlers);\nretrieveMapHandlers.push(function(source) {\n  var sourceMappingURL = retrieveSourceMapURL(source);\n  if (!sourceMappingURL) return null;\n\n  // Read the contents of the source map\n  var sourceMapData;\n  if (reSourceMap.test(sourceMappingURL)) {\n    // Support source map URL as a data url\n    var rawData = sourceMappingURL.slice(sourceMappingURL.indexOf(',') + 1);\n    sourceMapData = bufferFrom(rawData, \"base64\").toString();\n    sourceMappingURL = source;\n  } else {\n    // Support source map URLs relative to the source URL\n    sourceMappingURL = supportRelativeURL(source, sourceMappingURL);\n    sourceMapData = retrieveFile(sourceMappingURL);\n  }\n\n  if (!sourceMapData) {\n    return null;\n  }\n\n  return {\n    url: sourceMappingURL,\n    map: sourceMapData\n  };\n});\n\nfunction mapSourcePosition(position) {\n  var sourceMap = sourceMapCache[position.source];\n  if (!sourceMap) {\n    // Call the (overrideable) retrieveSourceMap function to get the source map.\n    var urlAndMap = retrieveSourceMap(position.source);\n    if (urlAndMap) {\n      sourceMap = sourceMapCache[position.source] = {\n        url: urlAndMap.url,\n        map: new SourceMapConsumer(urlAndMap.map)\n      };\n\n      // Load all sources stored inline with the source map into the file cache\n      // to pretend like they are already loaded. They may not exist on disk.\n      if (sourceMap.map.sourcesContent) {\n        sourceMap.map.sources.forEach(function(source, i) {\n          var contents = sourceMap.map.sourcesContent[i];\n          if (contents) {\n            var url = supportRelativeURL(sourceMap.url, source);\n            fileContentsCache[url] = contents;\n          }\n        });\n      }\n    } else {\n      sourceMap = sourceMapCache[position.source] = {\n        url: null,\n        map: null\n      };\n    }\n  }\n\n  // Resolve the source URL relative to the URL of the source map\n  if (sourceMap && sourceMap.map && typeof sourceMap.map.originalPositionFor === 'function') {\n    var originalPosition = sourceMap.map.originalPositionFor(position);\n\n    // Only return the original position if a matching line was found. If no\n    // matching line is found then we return position instead, which will cause\n    // the stack trace to print the path and line for the compiled file. It is\n    // better to give a precise location in the compiled file than a vague\n    // location in the original file.\n    if (originalPosition.source !== null) {\n      originalPosition.source = supportRelativeURL(\n        sourceMap.url, originalPosition.source);\n      return originalPosition;\n    }\n  }\n\n  return position;\n}\n\n// Parses code generated by FormatEvalOrigin(), a function inside V8:\n// https://code.google.com/p/v8/source/browse/trunk/src/messages.js\nfunction mapEvalOrigin(origin) {\n  // Most eval() calls are in this format\n  var match = /^eval at ([^(]+) \\((.+):(\\d+):(\\d+)\\)$/.exec(origin);\n  if (match) {\n    var position = mapSourcePosition({\n      source: match[2],\n      line: +match[3],\n      column: match[4] - 1\n    });\n    return 'eval at ' + match[1] + ' (' + position.source + ':' +\n      position.line + ':' + (position.column + 1) + ')';\n  }\n\n  // Parse nested eval() calls using recursion\n  match = /^eval at ([^(]+) \\((.+)\\)$/.exec(origin);\n  if (match) {\n    return 'eval at ' + match[1] + ' (' + mapEvalOrigin(match[2]) + ')';\n  }\n\n  // Make sure we still return useful information if we didn't find anything\n  return origin;\n}\n\n// This is copied almost verbatim from the V8 source code at\n// https://code.google.com/p/v8/source/browse/trunk/src/messages.js. The\n// implementation of wrapCallSite() used to just forward to the actual source\n// code of CallSite.prototype.toString but unfortunately a new release of V8\n// did something to the prototype chain and broke the shim. The only fix I\n// could find was copy/paste.\nfunction CallSiteToString() {\n  var fileName;\n  var fileLocation = \"\";\n  if (this.isNative()) {\n    fileLocation = \"native\";\n  } else {\n    fileName = this.getScriptNameOrSourceURL();\n    if (!fileName && this.isEval()) {\n      fileLocation = this.getEvalOrigin();\n      fileLocation += \", \";  // Expecting source position to follow.\n    }\n\n    if (fileName) {\n      fileLocation += fileName;\n    } else {\n      // Source code does not originate from a file and is not native, but we\n      // can still get the source position inside the source string, e.g. in\n      // an eval string.\n      fileLocation += \"<anonymous>\";\n    }\n    var lineNumber = this.getLineNumber();\n    if (lineNumber != null) {\n      fileLocation += \":\" + lineNumber;\n      var columnNumber = this.getColumnNumber();\n      if (columnNumber) {\n        fileLocation += \":\" + columnNumber;\n      }\n    }\n  }\n\n  var line = \"\";\n  var functionName = this.getFunctionName();\n  var addSuffix = true;\n  var isConstructor = this.isConstructor();\n  var isMethodCall = !(this.isToplevel() || isConstructor);\n  if (isMethodCall) {\n    var typeName = this.getTypeName();\n    // Fixes shim to be backward compatable with Node v0 to v4\n    if (typeName === \"[object Object]\") {\n      typeName = \"null\";\n    }\n    var methodName = this.getMethodName();\n    if (functionName) {\n      if (typeName && functionName.indexOf(typeName) != 0) {\n        line += typeName + \".\";\n      }\n      line += functionName;\n      if (methodName && functionName.indexOf(\".\" + methodName) != functionName.length - methodName.length - 1) {\n        line += \" [as \" + methodName + \"]\";\n      }\n    } else {\n      line += typeName + \".\" + (methodName || \"<anonymous>\");\n    }\n  } else if (isConstructor) {\n    line += \"new \" + (functionName || \"<anonymous>\");\n  } else if (functionName) {\n    line += functionName;\n  } else {\n    line += fileLocation;\n    addSuffix = false;\n  }\n  if (addSuffix) {\n    line += \" (\" + fileLocation + \")\";\n  }\n  return line;\n}\n\nfunction cloneCallSite(frame) {\n  var object = {};\n  Object.getOwnPropertyNames(Object.getPrototypeOf(frame)).forEach(function(name) {\n    object[name] = /^(?:is|get)/.test(name) ? function() { return frame[name].call(frame); } : frame[name];\n  });\n  object.toString = CallSiteToString;\n  return object;\n}\n\nfunction wrapCallSite(frame, state) {\n  // provides interface backward compatibility\n  if (state === undefined) {\n    state = { nextPosition: null, curPosition: null }\n  }\n  if(frame.isNative()) {\n    state.curPosition = null;\n    return frame;\n  }\n\n  // Most call sites will return the source file from getFileName(), but code\n  // passed to eval() ending in \"//# sourceURL=...\" will return the source file\n  // from getScriptNameOrSourceURL() instead\n  var source = frame.getFileName() || frame.getScriptNameOrSourceURL();\n  if (source) {\n    var line = frame.getLineNumber();\n    var column = frame.getColumnNumber() - 1;\n\n    // Fix position in Node where some (internal) code is prepended.\n    // See https://github.com/evanw/node-source-map-support/issues/36\n    // Header removed in node at ^10.16 || >=11.11.0\n    // v11 is not an LTS candidate, we can just test the one version with it.\n    // Test node versions for: 10.16-19, 10.20+, 12-19, 20-99, 100+, or 11.11\n    var noHeader = /^v(10\\.1[6-9]|10\\.[2-9][0-9]|10\\.[0-9]{3,}|1[2-9]\\d*|[2-9]\\d|\\d{3,}|11\\.11)/;\n    var headerLength = noHeader.test(process.version) ? 0 : 62;\n    if (line === 1 && column > headerLength && !isInBrowser() && !frame.isEval()) {\n      column -= headerLength;\n    }\n\n    var position = mapSourcePosition({\n      source: source,\n      line: line,\n      column: column\n    });\n    state.curPosition = position;\n    frame = cloneCallSite(frame);\n    var originalFunctionName = frame.getFunctionName;\n    frame.getFunctionName = function() {\n      if (state.nextPosition == null) {\n        return originalFunctionName();\n      }\n      return state.nextPosition.name || originalFunctionName();\n    };\n    frame.getFileName = function() { return position.source; };\n    frame.getLineNumber = function() { return position.line; };\n    frame.getColumnNumber = function() { return position.column + 1; };\n    frame.getScriptNameOrSourceURL = function() { return position.source; };\n    return frame;\n  }\n\n  // Code called using eval() needs special handling\n  var origin = frame.isEval() && frame.getEvalOrigin();\n  if (origin) {\n    origin = mapEvalOrigin(origin);\n    frame = cloneCallSite(frame);\n    frame.getEvalOrigin = function() { return origin; };\n    return frame;\n  }\n\n  // If we get here then we were unable to change the source position\n  return frame;\n}\n\n// This function is part of the V8 stack trace API, for more info see:\n// https://v8.dev/docs/stack-trace-api\nfunction prepareStackTrace(error, stack) {\n  if (emptyCacheBetweenOperations) {\n    fileContentsCache = {};\n    sourceMapCache = {};\n  }\n\n  var name = error.name || 'Error';\n  var message = error.message || '';\n  var errorString = name + \": \" + message;\n\n  var state = { nextPosition: null, curPosition: null };\n  var processedStack = [];\n  for (var i = stack.length - 1; i >= 0; i--) {\n    processedStack.push('\\n    at ' + wrapCallSite(stack[i], state));\n    state.nextPosition = state.curPosition;\n  }\n  state.curPosition = state.nextPosition = null;\n  return errorString + processedStack.reverse().join('');\n}\n\n// Generate position and snippet of original source with pointer\nfunction getErrorSource(error) {\n  var match = /\\n    at [^(]+ \\((.*):(\\d+):(\\d+)\\)/.exec(error.stack);\n  if (match) {\n    var source = match[1];\n    var line = +match[2];\n    var column = +match[3];\n\n    // Support the inline sourceContents inside the source map\n    var contents = fileContentsCache[source];\n\n    // Support files on disk\n    if (!contents && fs && fs.existsSync(source)) {\n      try {\n        contents = fs.readFileSync(source, 'utf8');\n      } catch (er) {\n        contents = '';\n      }\n    }\n\n    // Format the line from the original source code like node does\n    if (contents) {\n      var code = contents.split(/(?:\\r\\n|\\r|\\n)/)[line - 1];\n      if (code) {\n        return source + ':' + line + '\\n' + code + '\\n' +\n          new Array(column).join(' ') + '^';\n      }\n    }\n  }\n  return null;\n}\n\nfunction printErrorAndExit (error) {\n  var source = getErrorSource(error);\n\n  // Ensure error is printed synchronously and not truncated\n  if (process.stderr._handle && process.stderr._handle.setBlocking) {\n    process.stderr._handle.setBlocking(true);\n  }\n\n  if (source) {\n    console.error();\n    console.error(source);\n  }\n\n  console.error(error.stack);\n  process.exit(1);\n}\n\nfunction shimEmitUncaughtException () {\n  var origEmit = process.emit;\n\n  process.emit = function (type) {\n    if (type === 'uncaughtException') {\n      var hasStack = (arguments[1] && arguments[1].stack);\n      var hasListeners = (this.listeners(type).length > 0);\n\n      if (hasStack && !hasListeners) {\n        return printErrorAndExit(arguments[1]);\n      }\n    }\n\n    return origEmit.apply(this, arguments);\n  };\n}\n\nvar originalRetrieveFileHandlers = retrieveFileHandlers.slice(0);\nvar originalRetrieveMapHandlers = retrieveMapHandlers.slice(0);\n\nexports.wrapCallSite = wrapCallSite;\nexports.getErrorSource = getErrorSource;\nexports.mapSourcePosition = mapSourcePosition;\nexports.retrieveSourceMap = retrieveSourceMap;\n\nexports.install = function(options) {\n  options = options || {};\n\n  if (options.environment) {\n    environment = options.environment;\n    if ([\"node\", \"browser\", \"auto\"].indexOf(environment) === -1) {\n      throw new Error(\"environment \" + environment + \" was unknown. Available options are {auto, browser, node}\")\n    }\n  }\n\n  // Allow sources to be found by methods other than reading the files\n  // directly from disk.\n  if (options.retrieveFile) {\n    if (options.overrideRetrieveFile) {\n      retrieveFileHandlers.length = 0;\n    }\n\n    retrieveFileHandlers.unshift(options.retrieveFile);\n  }\n\n  // Allow source maps to be found by methods other than reading the files\n  // directly from disk.\n  if (options.retrieveSourceMap) {\n    if (options.overrideRetrieveSourceMap) {\n      retrieveMapHandlers.length = 0;\n    }\n\n    retrieveMapHandlers.unshift(options.retrieveSourceMap);\n  }\n\n  // Support runtime transpilers that include inline source maps\n  if (options.hookRequire && !isInBrowser()) {\n    var Module;\n    try {\n      Module = require('module');\n    } catch (err) {\n      // NOP: Loading in catch block to convert webpack error to warning.\n    }\n    var $compile = Module.prototype._compile;\n\n    if (!$compile.__sourceMapSupport) {\n      Module.prototype._compile = function(content, filename) {\n        fileContentsCache[filename] = content;\n        sourceMapCache[filename] = undefined;\n        return $compile.call(this, content, filename);\n      };\n\n      Module.prototype._compile.__sourceMapSupport = true;\n    }\n  }\n\n  // Configure options\n  if (!emptyCacheBetweenOperations) {\n    emptyCacheBetweenOperations = 'emptyCacheBetweenOperations' in options ?\n      options.emptyCacheBetweenOperations : false;\n  }\n\n  // Install the error reformatter\n  if (!errorFormatterInstalled) {\n    errorFormatterInstalled = true;\n    Error.prepareStackTrace = prepareStackTrace;\n  }\n\n  if (!uncaughtShimInstalled) {\n    var installHandler = 'handleUncaughtExceptions' in options ?\n      options.handleUncaughtExceptions : true;\n\n    // Provide the option to not install the uncaught exception handler. This is\n    // to support other uncaught exception handlers (in test frameworks, for\n    // example). If this handler is not installed and there are no other uncaught\n    // exception handlers, uncaught exceptions will be caught by node's built-in\n    // exception handler and the process will still be terminated. However, the\n    // generated JavaScript code will be shown above the stack trace instead of\n    // the original source code.\n    if (installHandler && hasGlobalProcessEventEmitter()) {\n      uncaughtShimInstalled = true;\n      shimEmitUncaughtException();\n    }\n  }\n};\n\nexports.resetRetrieveHandlers = function() {\n  retrieveFileHandlers.length = 0;\n  retrieveMapHandlers.length = 0;\n\n  retrieveFileHandlers = originalRetrieveFileHandlers.slice(0);\n  retrieveMapHandlers = originalRetrieveMapHandlers.slice(0);\n\n  retrieveSourceMap = handlerExec(retrieveMapHandlers);\n  retrieveFile = handlerExec(retrieveFileHandlers);\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/source-map-support/source-map-support.js\n// module id = 37\n// module chunks = 0","module.exports = require(\"buffer-from\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"buffer-from\"\n// module id = 38\n// module chunks = 0","module.exports = require(\"cheerio\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"cheerio\"\n// module id = 39\n// module chunks = 0","module.exports = require(\"fs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs\"\n// module id = 40\n// module chunks = 0","module.exports = require(\"module\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"module\"\n// module id = 41\n// module chunks = 0","module.exports = require(\"source-map\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"source-map\"\n// module id = 42\n// module chunks = 0"],"sourceRoot":""}